data_mixins:
    job_source:
        class: JobSourceMixin
        fields:
            source:
                type: "@django.ForeignKey"
                relation: job_source
                options:
                    "null": true
                    on_delete: "@django.PROTECT"
                    editable: false

    job_sources:
        class: JobSourcesMixin
        fields:
            sources:
                type: "@django.ManyToManyField"
                relation: job_source

data_base:
    job_source:
        class: JobSourceBase
        base: resource
        mixins: [job_source]
        id_fields: [source_id, name]
        meta:
            unique_together: [source, name]
            scope: source

data:
    job_source:
        class: JobSource
        base: resource
        roles:
            edit: [job-admin]
            view: [public]
        meta:
          command_base: job source

command_mixins:
    job_source:
        class: JobSourceMixin
        meta:
            job_source:
                data: job_source
                priority: 1

command_base:
    job_source:
        mixins: [job_source]
        server_enabled: true
        groups_allowed: [job-admin]

command:
    job:
        source:
            resource: job_source
            base: job_source
            base_name: job_source
            priority: 50
